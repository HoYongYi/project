<!DOCTYPE html>
<html>

<head>
    <title>Health Center</title>
    <style type="text/css" title="layout" media="screen"> @import url("style.css"); </style>
    <style type="text/css" title="layout" media="screen"> @import url("video.css"); </style>
    <script src='js/adapter.js'></script>
    <script src="http://cdn.peerjs.com/0.3/peer.min.js"></script>


</head>

<body>
<div id="wrapper">
    <div id="top">
        <div id="logo">
            <img src="images/plus.gif" alt="Logo"/>
            <h1>Health Center</h1>
            <p>DELIVERING ONLY PREMIUM SERVICES</p>
        </div>
    </div>
    <form action="action_page.php">
        <div class="imgcontainer">
        </div>

        <li></li>

        <div class="container">
            <input type="text" placeholder="Enter Username" name="loginID" required>

            <input type="password" placeholder="Enter Password" name="password" required>

            <span class="psw"><a href="#">Forgot password?</a></span>
        </div>
    </form>
    <div id="menu">
        <ul>
            <li><a href="#">About</a></li>
            <li><a href="#">Patient Care and Health Information</a></li>
            <li><a href="#">News and Events</a></li>
            <li><a href="#">Department and Centers</a></li>
            <li><a href="#">Product and Services</a></li>
            <li><a href="#">Contact Us</a></li>
        </ul>
    </div>

    <div class = 'videoContainer'>
        <video id="localVideo" autoplay muted height="40%" width="40%"></video>
        <video id="remoteVideo" autoplay muted height="40%" width="40%"></video>

    </div>




    <div>
        <button id="startButton">Start</button>
        <button id="callButton">Call</button>
        <button id="hangupButton">Hang Up</button>
        <p>Your id: <span id="my-id">...</span></p>
        <input type="text" placeholder="Call user id..." id="callto-id">

    </div>

    <textarea id="dataChannelSend" disabled></textarea>
    <textarea id="dataChannelReceive" disabled></textarea>

    <div class="cleaner">&nbsp;</div>
    <div class="line">
        &nbsp;</div>
    <div id="footer">
        &copy; 2008 <a href="index.html">Designs.com</a>. Valid <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a> &amp; <a href="http://validator.w3.org/check?uri=referer">XHTML</a>. Template design by <a href="http://gendesigns.blogspot.com">Gen</a>
    </div>

    <script>


        // Compatibility shim
        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;

        // PeerJS object
        var peer = new Peer({key: 'iegw2vtuo4h4obt9'});

        peer.on('open', function(){
            $('#my-id').text(peer.id);
        });

        // Receiving a call
        peer.on('call', function(call){
            // Answer the call automatically (instead of prompting user) for demo purposes
            call.answer(window.localStream);
            step3(call);
        });
        peer.on('error', function(err){
            alert(err.message);
            // Return to step 2 if error occurs
            step2();
        });

        // Click handlers setup
        $(function(){
            $('#callButton').click(function(){
                // Initiate a call!
                var call = peer.call($('#callto-id').val(), window.localStream);

                step3(call);
            });

            $('#hangupButton').click(function(){
                window.existingCall.close();
                step2();
            });

            // Retry if getUserMedia fails
            $('#step1-retry').click(function(){
                $('#step1-error').hide();
                step1();
            });

            // Get things started
            step1();
        });

        function step1 () {
            // Get audio/video stream
            navigator.getUserMedia({audio: true, video: true}, function(stream){
                // Set your video displays
                $('#localVideo').prop('src', URL.createObjectURL(stream));

                window.localStream = stream;
                step2();
            }, function(){ $('#step1-error').show(); });
        }

        function step2 () {
            $('#step1, #step3').hide();
            $('#step2').show();
        }

        function step3 (call) {
            // Hang up on an existing call if present
            if (window.existingCall) {
                window.existingCall.close();
            }

            // Wait for stream on the call, then set peer video display
            call.on('stream', function(stream){
                $('#remoteVideo').prop('src', URL.createObjectURL(stream));
            });

            // UI stuff
            window.existingCall = call;
            $('#their-id').text(call.peer);
            call.on('close', step2);
            $('#step1, #step2').hide();
            $('#step3').show();
        }
    </script>


</div>
</body>

</html>
